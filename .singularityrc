# encoding: utf-8

batch :test do
  rubocop
  bootcoveralls { pr ENV.fetch('PULL', nil) } if flag? 'coveralls'
  rspec
end

batch :ci do
  shelltask { command 'bundle install --path ./vendor' }
  shelltask { command 'bundle exec singularity_runner batch test --flags coveralls' }
end

invoke_batch :test
